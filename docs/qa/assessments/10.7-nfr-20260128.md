# NFR Assessment: 10.7

Date: 2026-01-28
Reviewer: Quinn (Test Architect)

## Summary

- Security: PASS - Readonly color properties only; no input, no network, no data processing
- Performance: PASS - Negligible cost of ~30 static properties; proven QML binding pattern
- Reliability: PASS - Hardcoded readonly values with existing darkMode ternary pattern
- Maintainability: CONCERNS - No automated WCAG contrast tests; no property existence tests; downstream naming dependency risk

## Critical Issues

1. **No automated WCAG contrast validation** (Maintainability)
   - Risk: Color pairs may silently violate AA contrast ratio (4.5:1) without detection
   - Fix: Add a test script that computes contrast ratios for all foreground/background pairs and fails if any < 4.5:1

2. **No property existence tests** (Maintainability)
   - Risk: Downstream stories 10.5/10.6 depend on exact property names; a typo or rename would cascade
   - Fix: Add a QML test that imports Theme and asserts all new properties exist with correct types

## Quick Wins

- Add contrast ratio validation script using color hex math
- Add property smoke test in QML test suite
- Consider extracting Mermaid theme color values into named constants for easier maintenance

## Detailed Analysis

### Security (PASS)

This story adds only `readonly property color` and `readonly property var` declarations to Theme.qml. There is:
- No user input handling
- No data processing or transformation
- No network communication
- No dynamic code evaluation
- Full alignment with airgap zero-network constraint

### Performance (PASS)

- ~30 readonly color properties: QML evaluates these once per theme toggle
- 2 static Mermaid theme objects: small JS objects (~25 keys each), allocated once
- darkMode ternary pattern already proven performant in existing theme properties
- No computed properties, no binding chains, no heavy allocations

### Reliability (PASS)

- All values are hardcoded hex colors — cannot produce runtime errors
- `darkMode ? x : y` ternary is the same pattern used by all existing theme properties
- `readonly` prevents accidental mutation
- No async operations, no fallible paths

### Maintainability (CONCERNS)

| Concern | Impact | Recommendation |
|---------|--------|----------------|
| Manual-only WCAG verification | Medium — accessibility regression possible | Add automated contrast ratio test |
| No property type/existence tests | Medium — downstream breakage risk | Add QML property smoke test |
| 50+ hardcoded hex values in Mermaid themes | Low — maintenance burden | Consider named color constants |
| Documentation relies on inline comments only | Low — adequate for scope | Acceptable for 1-point story |
