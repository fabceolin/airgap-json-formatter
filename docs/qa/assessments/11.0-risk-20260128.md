# Risk Profile: Story 11.0 - Responsive Mobile-Friendly UI

Date: 2026-01-28
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 10
- Critical Risks: 0
- High Risks: 3
- Risk Score: 61/100

This story involves significant UI refactoring across multiple QML components. The primary risk vectors are desktop regression, Qt WASM touch compatibility, and cross-browser layout inconsistency. No critical (score 9) risks identified, but three high-risk items require attention.

## Risk Matrix

| Risk ID   | Description                                        | Probability | Impact    | Score | Priority |
|-----------|----------------------------------------------------|-------------|-----------|-------|----------|
| TECH-001  | Desktop layout regression at ≥1024px               | Medium (2)  | High (3)  | 6     | High     |
| TECH-002  | Qt WASM touch event handling unreliable             | High (3)    | Medium (2)| 6     | High     |
| TECH-003  | Layout thrashing during window resize               | Low (1)     | Medium (2)| 2     | Low      |
| TECH-004  | QML Loader/StackLayout state loss on tab switch     | Medium (2)  | Medium (2)| 4     | Medium   |
| PERF-001  | Performance degradation on low-end mobile devices   | Medium (2)  | High (3)  | 6     | High     |
| PERF-002  | WASM binary size impacts mobile load time           | Low (1)     | Medium (2)| 2     | Low      |
| SEC-001   | Touch target overlap enabling unintended actions     | Low (1)     | Low (1)   | 1     | Minimal  |
| BUS-001   | Mobile UX insufficient for real-world JSON editing   | Medium (2)  | Medium (2)| 4     | Medium   |
| OPS-001   | Inadequate cross-device test coverage               | Medium (2)  | Medium (2)| 4     | Medium   |
| TECH-005  | Breakpoint boundary artifacts (768px, 1024px edge)  | Medium (2)  | Low (1)   | 2     | Low      |

## Critical Risks Requiring Immediate Attention

No critical (score 9) risks identified.

## High Risks (Score 6)

### 1. TECH-001: Desktop Layout Regression

**Score: 6 (High)**
**Probability**: Medium - Refactoring responsive breakpoints into Main.qml, Toolbar.qml, Header.qml touches core layout code
**Impact**: High - Breaking the existing desktop experience for all current users would be a severe regression
**Mitigation**:
- Implement snapshot/screenshot tests of desktop layout before and after changes
- Use `isDesktop` guard to ensure existing layout code paths remain untouched at ≥1024px
- Add automated visual regression tests at 1024px, 1280px, 1920px widths
**Testing Focus**: Side-by-side visual comparison at all desktop widths; verify every toolbar button, header element, and split view behaves identically

### 2. TECH-002: Qt WASM Touch Event Handling

**Score: 6 (High)**
**Probability**: High - Qt's WASM touch support is known to have inconsistencies across browsers and versions
**Impact**: Medium - Touch interactions may not work correctly, degrading mobile usability but not breaking desktop
**Mitigation**:
- Test touch events early in development on real devices
- Implement mouse event fallbacks where touch fails
- Document known Qt WASM touch limitations
- Consider explicit touch area overlays for critical interactive elements
**Testing Focus**: Test tap, scroll, and drag on iOS Safari, Android Chrome; verify overflow menu and tab switching work via touch

### 3. PERF-001: Mobile Performance Degradation

**Score: 6 (High)**
**Probability**: Medium - WASM + QML rendering on mobile is resource-intensive; adding responsive layout logic increases computation
**Impact**: High - Unusable app on low-end devices defeats the purpose of mobile support
**Mitigation**:
- Profile rendering on throttled CPU (4x slowdown) during development
- Avoid expensive property bindings in responsive breakpoint calculations
- Use `readonly property` for breakpoints to prevent binding loops
- Minimize QML component creation/destruction on layout switches
**Testing Focus**: Measure time-to-interactive on simulated low-end Android; check for jank during resize and tab switching

## Medium Risks (Score 4)

### 4. TECH-004: State Loss on Input/Output Tab Switch

**Score: 4 (Medium)**
**Probability**: Medium - Using StackLayout with Loader components may not preserve editor state (cursor position, scroll, undo history)
**Impact**: Medium - Users lose their place when switching tabs, causing frustration
**Mitigation**:
- Keep both panes loaded but hidden (visibility toggle) rather than loading/unloading
- Explicitly save and restore scroll position as documented in AC #5
- Test undo/redo stack preservation across tab switches
**Testing Focus**: Enter text in input, switch to output, switch back - verify cursor, scroll, and undo history preserved

### 5. BUS-001: Mobile UX Insufficient for JSON Editing

**Score: 4 (Medium)**
**Probability**: Medium - JSON editing on small screens is inherently challenging; the overflow menu pattern may hide essential actions
**Impact**: Medium - Users on mobile may find the tool frustrating and abandon it
**Mitigation**:
- Keep Format button always visible (primary CTA) as designed
- Ensure paste from clipboard works reliably on mobile
- Consider swipe gesture between input/output as future enhancement
- User test with 3-5 people on actual phones
**Testing Focus**: Complete a full workflow (paste JSON → format → copy output) on a 375px screen

### 6. OPS-001: Inadequate Cross-Device Test Coverage

**Score: 4 (Medium)**
**Probability**: Medium - Real-device testing is resource-intensive and may be skipped or abbreviated
**Impact**: Medium - Bugs ship to devices that weren't tested
**Mitigation**:
- Establish minimum test matrix: iPhone Safari, Android Chrome, iPad Safari, Desktop Chrome/Firefox
- Use BrowserStack or similar for device coverage if real devices unavailable
- Automate responsive layout tests at key breakpoints
**Testing Focus**: Verify testing checklist from story is executed before merge

## Low Risks (Score 2-3)

### 7. TECH-003: Layout Thrashing During Resize

**Score: 2 (Low)**
**Probability**: Low - QML's declarative binding system handles resize well generally
**Impact**: Medium - Visual flickering during resize looks unprofessional
**Mitigation**: Use smooth transitions; avoid imperative layout recalculations

### 8. PERF-002: WASM Binary Size on Mobile

**Score: 2 (Low)**
**Probability**: Low - Binary is already loaded; this story doesn't add significant new code
**Impact**: Medium - Slow initial load on mobile networks
**Mitigation**: Out of scope for this story (initial load is a separate concern)

### 9. TECH-005: Breakpoint Boundary Artifacts

**Score: 2 (Low)**
**Probability**: Medium - At exactly 768px or 1024px, layout may flicker between states
**Impact**: Low - Cosmetic issue at edge widths
**Mitigation**: Add hysteresis (e.g., switch at 768 going down, 780 going up) or accept minor flicker

## Minimal Risks (Score 1)

### 10. SEC-001: Touch Target Overlap

**Score: 1 (Minimal)**
**Probability**: Low - Proper spacing should prevent this
**Impact**: Low - User taps wrong button occasionally
**Mitigation**: Enforce 44px minimum with adequate spacing

## Risk Distribution

### By Category
- Technical: 5 risks (0 critical, 2 high)
- Performance: 2 risks (0 critical, 1 high)
- Security: 1 risk (0 critical)
- Business: 1 risk (0 critical)
- Operational: 1 risk (0 critical)

### By Component
- Main.qml / Layout: 4 risks
- Toolbar.qml: 2 risks
- InputOutputToggle.qml (new): 2 risks
- Header.qml: 1 risk
- Theme.qml: 1 risk

## Risk-Based Testing Strategy

### Priority 1: High Risk Tests
1. **Desktop regression suite** - Screenshot comparison at 1024px, 1280px, 1920px (TECH-001)
2. **Touch interaction tests** - Real device tap/scroll on iOS Safari and Android Chrome (TECH-002)
3. **Mobile performance profiling** - Time-to-interactive on throttled CPU (PERF-001)

### Priority 2: Medium Risk Tests
4. **Tab switch state preservation** - Cursor, scroll, undo stack after input/output toggle (TECH-004)
5. **End-to-end mobile workflow** - Paste → format → copy on 375px device (BUS-001)
6. **Full device matrix execution** - All devices in testing checklist (OPS-001)

### Priority 3: Low Risk Tests
7. **Resize animation smoothness** - Drag resize from 1920px to 320px (TECH-003)
8. **Breakpoint boundary behavior** - Test at exactly 768px and 1024px (TECH-005)

## Risk Acceptance Criteria

### Must Fix Before Production
- All high risks (score 6) must have mitigations verified
- Desktop regression tests must pass with zero visual differences

### Can Deploy with Mitigation
- Medium risks with documented workarounds
- Mobile performance acceptable if core workflow completes in <3s

### Accepted Risks
- WASM binary size on mobile (out of scope)
- Touch target overlap (minimal risk, standard spacing sufficient)

## Gate Integration

```yaml
risk_summary:
  totals:
    critical: 0
    high: 3
    medium: 3
    low: 3
  highest:
    id: TECH-001
    score: 6
    title: "Desktop layout regression at ≥1024px"
  recommendations:
    must_fix:
      - "Implement visual regression tests for desktop layout before merging"
      - "Verify Qt WASM touch events on real iOS Safari and Android Chrome"
      - "Profile mobile rendering performance on throttled CPU"
    monitor:
      - "Watch for layout flicker reports at breakpoint boundaries"
      - "Monitor mobile session completion rates post-deployment"
```

## Risk Review Triggers

Review and update this risk profile when:
- Qt version is updated (touch event behavior may change)
- New responsive breakpoints are added
- Additional mobile-specific features are planned
- Performance issues reported on specific devices

---
Risk profile: docs/qa/assessments/11.0-risk-20260128.md
