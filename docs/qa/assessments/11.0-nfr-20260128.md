# NFR Assessment: 11.0 (v3 - YOLO Mode Reassessment)

Date: 2026-01-28
Reviewer: Quinn (QA)
Story Version: 1.4 (post architect/PO corrections)
Assessment Mode: Non-interactive (YOLO)

## Summary

- Security: **PASS** — Client-side only; airgap constraint preserved; no new input vectors or network calls
- Performance: **PASS** — AC11 defines measurable thresholds (FCP <3s, TTI <5s, format <500ms, layout <200ms on 4x CPU throttle + Fast 3G)
- Reliability: **CONCERNS** — Tab-switch state in AC10; Qt WASM touch fallback now in Task 8; orientation change testing added in Task 11 but no behavioral AC
- Maintainability: **CONCERNS** — Breakpoints centralized; unit test subtasks added to Tasks 4/6 but scenarios not specified; no automated visual regression in CI

## Quality Score

quality_score = 100 - (0 FAIL × 20) - (2 CONCERNS × 10) = **80/100**

## Detailed Findings

### Security (PASS)

**Evidence:**
- Airgap badge retained on all screen sizes (Task 3 explicitly keeps "Airgap Protected" visible)
- No new network calls; responsive changes are purely QML property bindings
- Touch interactions do not introduce new input vectors
- StackLayout keeps both panes alive — no serialization to external storage
- PRD NFR1 (zero network communication) and NFR8 (no persistent storage) remain unaffected
- No authentication/authorization applicable (client-side tool)

**Assessment:** The responsive UI changes are purely presentation-layer. The core airgap architecture is preserved. Low risk.

### Performance (PASS)

**Evidence:**
- AC11 defines concrete, measurable thresholds:
  - First Contentful Paint (FCP) < 3s
  - Time to Interactive (TTI) < 5s
  - JSON format operation (10KB payload) < 500ms
  - Layout transitions settle within 200ms with no flicker
- Test environment specified: mid-range mobile with 4x CPU throttle + Fast 3G network
- Task 10 maps directly to AC11 thresholds
- Dev Notes specify `readonly property` for breakpoints to minimize recalculation
- Task 4's StackLayout pattern avoids component destruction/recreation overhead

**Remaining considerations:**
- No WASM binary size budget for mobile. Not critical since Service Worker caches the binary, but initial load on constrained networks should be monitored.
- Format operation threshold (500ms) is 5x more lenient than PRD NFR4 (100ms for 1MB) — appropriate for throttled mobile scenario.

### Reliability (CONCERNS)

**Resolved since v2:**
- Tab-switch state preservation now explicit in AC10 (content, cursor, scroll, undo history)
- Task 4 uses StackLayout keep-alive pattern with `active: true`
- Task 8 now includes mouse event fallback for Qt WASM touch failures
- Task 11 now includes orientation change testing
- Task 11 now includes Airgap badge visibility verification at 375px, 390px

**Outstanding gaps:**
1. **No behavioral AC for orientation change** — Task 11 tests orientation change, but no AC defines expected behavior (state preservation during rotation?)
2. **No behavior defined for browser back button** — On mobile tab view, pressing browser back could be unexpected
3. **Safari iOS quirks** — No defined behavior for viewport bounce, keyboard appearance changing layout dimensions

**Impact:** Users may encounter edge cases without defined fallback behaviors, but core functionality is covered.

### Maintainability (CONCERNS)

**Resolved since v2:**
- Breakpoint constants centralized in Theme.qml (Dev Notes)
- Unit test subtasks added to Tasks 4 and 6 per v1.3 story update

**Outstanding gaps:**
1. **Unit test scenarios not specified** — Tasks 4/6 say "create unit tests" but don't enumerate specific test cases (tab state machine, menu dismiss behaviors, keyboard navigation)
2. **No automated visual regression in CI** — All cross-device testing (Task 11) is manual; desktop regression relies on manual screenshot comparison
3. **No QML component API documentation** — New components lack JSDoc-style property descriptions
4. **Test fixture requirements undefined** — Test design mentions test data but story tasks don't specify fixture creation

**Impact:** Future changes may introduce regressions without automated visual tests. Manual device testing does not scale.

## Critical Issues

None critical. Two moderate concerns remain:

1. **No fallback behavior *definition* for Qt WASM touch failures** (Reliability)
   - Task 8 adds mouse event fallback implementation
   - Missing: AC or task defining *what user-facing behavior* is expected when touch fails
   - Recommendation: Add clarifying note to Task 8 describing expected UX

2. **No automated visual regression in CI** (Maintainability)
   - Risk: Desktop regression (TECH-001, high risk) detected late
   - Recommendation: Future story to add Playwright/Percy screenshot comparison

## Quick Wins Applied Since v1.0

The following recommendations from v1.0 have been incorporated into story v1.3/v1.4:

- [x] Measurable performance baselines in AC11 (was "not degraded")
- [x] Tab-switch state preservation in AC10
- [x] Breakpoint centralization in Theme.qml
- [x] Unit test subtasks in Tasks 4 and 6
- [x] Touch event fallback (mouse events) in Task 8
- [x] Orientation change testing in Task 11
- [x] Airgap badge visibility verification at mobile widths

## Remaining Recommendations

1. **Enumerate unit test scenarios** — Add specific test cases to Tasks 4/6 subtasks
2. **Define orientation change behavior** — Add note to Task 11 or clarify in AC
3. **Document new QML component APIs** — Add property descriptions to code comments
4. **Plan automated visual regression** — Consider follow-up story for CI integration

## Gate YAML Block

```yaml
nfr_validation:
  _assessed: [security, performance, reliability, maintainability]
  _version: v3
  security:
    status: PASS
    notes: 'Client-side only; airgap preserved across all layouts; no new input vectors'
  performance:
    status: PASS
    notes: 'AC11 defines measurable thresholds: FCP <3s, TTI <5s, format <500ms, layout <200ms on mid-range mobile (4x CPU, Fast 3G)'
  reliability:
    status: CONCERNS
    notes: 'Tab-switch state in AC10; touch fallback in Task 8; orientation change tested but no behavioral AC'
  maintainability:
    status: CONCERNS
    notes: 'Breakpoints centralized; unit test subtasks added but scenarios not specified; no automated visual regression in CI'
```

---

NFR assessment: docs/qa/assessments/11.0-nfr-20260128.md
Gate NFR block ready → paste into docs/qa/gates/11.0-responsive-mobile-friendly-ui.yml under nfr_validation
